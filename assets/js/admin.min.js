jQuery(function(t){var e,a=t("#product_image_gallery"),i=t("#product_images_container").find("ul.product_images");t(".add_product_images").on("click","a",function(r){var l=t(this);return r.preventDefault(),e?void e.open():(e=wp.media.frames.product_gallery=wp.media({title:l.data("choose"),button:{text:l.data("update")},states:[new wp.media.controller.Library({title:l.data("choose"),filterable:"all",multiple:!0})]}),e.on("select",function(){var t=e.state().get("selection"),r=a.val();t.map(function(t){if(t=t.toJSON(),t.id){r=r?r+","+t.id:t.id;var e=t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;i.append('<li class="image" data-attachment_id="'+t.id+'"><img src="'+e+'" /><ul class="actions"><li><a href="#" class="delete" title="'+l.data("delete")+'">'+l.data("text")+"</a></li></ul></li>")}}),a.val(r)}),void e.open())}),i.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"wc-metabox-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){var e="";t("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var a=t(this).attr("data-attachment_id");e=e+a+","}),a.val(e)}}),t("#product_images_container").on("click","a.delete",function(){t(this).closest("li.image").remove();var e="";return t("#product_images_container").find("ul li.image").css("cursor","default").each(function(){var a=t(this).attr("data-attachment_id");e=e+a+","}),a.val(e),t("#tiptip_holder").removeAttr("style"),t("#tiptip_arrow").removeAttr("style"),!1})});